# Multik - Мультимедиа Конвертер

Multik — это веб-приложение для конвертации видеофайлов из формата MOV в MP4 с отслеживанием прогресса в реальном времени.

## Возможности

- **Отслеживание прогресса**: Визуализация процесса конвертации в реальном времени.
- **Веб-интерфейс**: Простой и интуитивный интерфейс с поддержкой Drag & Drop.
- **Очередь задач**: Последовательная обработка нескольких файлов.
- **Управление процессом**: Возможность отмены и повторной отправки задач.
- **Эффективность**: Использование FFmpeg с оптимизацией потоков для быстрой конвертации.
- **Socket.io**: Мгновенные уведомления о статусе конвертации.
- **Автоматическая очистка**: Удаление временных файлов после завершения или отмены.

## Технологии

- **Node.js**: Серверная платформа.
- **Express.js**: Веб-фреймворк.
- **Socket.io**: Двусторонняя связь для передачи прогресса.
- **FFmpeg**: Мощный инструмент для обработки видео.
- **Multer**: Загрузка файлов.
- **HTML/CSS/JavaScript**: Фронтенд без использования тяжелых фреймворков.

## Требования

Перед запуском убедитесь, что у вас установлены:

- Node.js (v14 или выше)
- FFmpeg (должен быть доступен в системной переменной PATH)

Проверка установки FFmpeg:

```bash
ffmpeg -version
```

Если FFmpeg не установлен:

- **Ubuntu/Debian**: `sudo apt update && sudo apt install ffmpeg`
- **macOS**: `brew install ffmpeg`
- **Windows**: Скачайте с [ffmpeg.org](https://ffmpeg.org/download.html)

## Установка

1. Клонируйте репозиторий:

```bash
git clone <repository-url>
```

2. Перейдите в папку проекта:

```bash
cd multik
```

3. Установите зависимости:

```bash
npm install
```

## Использование

1. Запустите сервер:

```bash
node server.js
```

2. Откройте браузер и перейдите по адресу:
```
http://localhost:3000
```

3. Перетащите MOV файлы в область загрузки или выберите их вручную.
4. Конвертация начнется автоматически (в порядке очереди).
5. Следите за прогрессом. При необходимости можно отменить конвертацию.
6. После завершения появится ссылка "Скачать" для загрузки готового MP4 файла.

## Структура проекта

```
multik/
├── server.js          # Основной файл сервера (Express + Socket.io)
├── package.json       # Зависимости и настройки
├── public/            # Фронтенд
│   ├── index.html     # HTML разметка
│   ├── index.js       # Логика клиента (Socket.io, UI, очередь)
│   └── style.css      # Стили
├── uploads/           # Временное хранилище загруженных файлов
├── output/            # Папка для готовых файлов
└── README.md          # Этот файл
```

## Как это работает

1. Пользователь загружает файл через веб-интерфейс.
2. Файл сохраняется во временную папку `uploads/`.
3. Сервер запускает процесс FFmpeg для конвертации в MP4.
   - Используются настройки для оптимизации производительности (ограничение потоков).
4. Прогресс считывается из вывода FFmpeg и отправляется клиенту через Socket.io.
5. По завершении файл сохраняется в `output/`, а исходник удаляется.
6. Клиент получает ссылку на скачивание.

## Конфигурация

Порт по умолчанию: 3000.
Чтобы изменить порт, отредактируйте `server.js`:

```javascript
server.listen(8080, ...); // Например, порт 8080
```

Настройки конвертации (кодек, пресеты, потоки) также находятся в `server.js` в вызове `spawn('ffmpeg', ...)`.

## Решение проблем

### Ошибки FFmpeg
- Убедитесь, что FFmpeg установлен и доступен в PATH.
- Проверьте права доступа к папкам `uploads/` и `output/`.

### Порт занят
Если порт 3000 занят другим приложением, измените его в `server.js`.

## Лицензия

MIT License. См. файл [LICENSE](LICENSE).

## Автор

slimmind